<domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'>
  <name>{{ vm_name }}</name>
  <metadata>
    <vmtemplate xmlns="http://unraid" name="Linux" icon="linux.png" os="linux"/>
  </metadata>
  <memory unit='MiB'>{{ vm_mem }}</memory>
  <vcpu placement='static'>{{ vm_cores }}</vcpu>
  <cpu mode='host-passthrough'/>
  <os>
    <type arch='x86_64' machine='q35'>hvm</type>
    <boot dev='hd'/>
  </os>
  <devices>
    <disk type='file' device='disk'>
      <driver name='qemu' type='qcow2'/>
      <source file='{{ vm_files_path }}/vm.qcow2'/>
      <target dev='sda' bus='virtio'/>
    </disk>
    <disk type='file' device='cdrom'>
      <driver name='qemu' type='raw'/>
      <source file='{{ vm_files_path }}/cloudinit.iso'/>
      <target dev='sdc' bus='scsi'/>
      <readonly/>
    </disk>    
    <interface type='bridge'>
      <source bridge='br0'/>
      <model type='virtio'/>
      <mac address='{{ vm_mac_addr }}' />
    </interface>
    <controller type='scsi' model='virtio-scsi'/>
    <graphics type='vnc' port='-1' autoport='yes' websocket='-1' listen='0.0.0.0' sharePolicy='ignore'>
      <listen type='address' address='0.0.0.0'/>
    </graphics>
    <video>
      <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='1' primary='yes'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x1e' function='0x0'/>
    </video>
    <serial type='pty'>
      <target port='0'/>
    </serial>
    <console type='pty'>
      <target type='serial' port='0'/>
    </console>    
  </devices>
</domain>
